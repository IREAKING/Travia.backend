// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: ticket.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getTicketsByBookingID = `-- name: GetTicketsByBookingID :many
SELECT 
    hk.dat_cho_id, 
    dc.tong_tien, 
    dc.don_vi_tien_te,
    hk.ho_ten, 
    hk.ngay_sinh, 
    hk.loai_khach, 
    hk.so_giay_to_tuy_thanh, 
    hk.quoc_tich,
    t.tieu_de AS ten_tour,
    kh.ngay_khoi_hanh, 
    kh.ngay_ket_thuc
FROM hanh_khach hk
JOIN dat_cho dc ON hk.dat_cho_id = dc.id
JOIN khoi_hanh_tour kh ON dc.khoi_hanh_id = kh.id
JOIN tour t ON kh.tour_id = t.id
WHERE dc.id = $1
`

type GetTicketsByBookingIDRow struct {
	DatChoID         int32          `json:"dat_cho_id"`
	TongTien         pgtype.Numeric `json:"tong_tien"`
	DonViTienTe      *string        `json:"don_vi_tien_te"`
	HoTen            string         `json:"ho_ten"`
	NgaySinh         pgtype.Date    `json:"ngay_sinh"`
	LoaiKhach        *string        `json:"loai_khach"`
	SoGiayToTuyThanh *string        `json:"so_giay_to_tuy_thanh"`
	QuocTich         *string        `json:"quoc_tich"`
	TenTour          string         `json:"ten_tour"`
	NgayKhoiHanh     pgtype.Date    `json:"ngay_khoi_hanh"`
	NgayKetThuc      pgtype.Date    `json:"ngay_ket_thuc"`
}

func (q *Queries) GetTicketsByBookingID(ctx context.Context, id int32) ([]GetTicketsByBookingIDRow, error) {
	rows, err := q.db.Query(ctx, getTicketsByBookingID, id)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetTicketsByBookingIDRow
	for rows.Next() {
		var i GetTicketsByBookingIDRow
		if err := rows.Scan(
			&i.DatChoID,
			&i.TongTien,
			&i.DonViTienTe,
			&i.HoTen,
			&i.NgaySinh,
			&i.LoaiKhach,
			&i.SoGiayToTuyThanh,
			&i.QuocTich,
			&i.TenTour,
			&i.NgayKhoiHanh,
			&i.NgayKetThuc,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
